{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./WebCameraUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":52,"index":84}}],"key":"7QFlRc+R5Zhr/RLcJUPMtLUHEsc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useWebQRScanner = useWebQRScanner;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _WebCameraUtils = require(_dependencyMap[1], \"./WebCameraUtils\");\n  const qrWorkerMethod = ({\n    data,\n    width,\n    height\n  }) => {\n    // eslint-disable-next-line no-undef\n    const decoded = self.jsQR(data, width, height, {\n      inversionAttempts: 'attemptBoth'\n    });\n    let parsed;\n    try {\n      parsed = JSON.parse(decoded);\n    } catch {\n      parsed = decoded;\n    }\n    if (parsed?.data) {\n      const nativeEvent = {\n        type: 'qr',\n        data: parsed.data,\n        cornerPoints: [],\n        bounds: {\n          origin: {\n            x: 0,\n            y: 0\n          },\n          size: {\n            width: 0,\n            height: 0\n          }\n        }\n      };\n      if (parsed.location) {\n        nativeEvent.cornerPoints = [parsed.location.topLeftCorner, parsed.location.bottomLeftCorner, parsed.location.topRightCorner, parsed.location.bottomRightCorner];\n      }\n      return nativeEvent;\n    }\n    return parsed;\n  };\n  const createWorkerAsyncFunction = (fn, deps) => {\n    const stringifiedFn = [`self.func = ${fn.toString()};`, 'self.onmessage = (e) => {', '  const result = self.func(e.data);', '  self.postMessage(result);', '};'];\n    if (deps.length > 0) {\n      stringifiedFn.unshift(`importScripts(${deps.map(dep => `'${dep}'`).join(', ')});`);\n    }\n    const blob = new Blob(stringifiedFn, {\n      type: 'text/javascript'\n    });\n    const worker = new Worker(URL.createObjectURL(blob));\n    // First-In First-Out queue of promises\n    const promises = [];\n    worker.onmessage = e => promises.shift()?.resolve(e.data);\n    return data => {\n      return new Promise((resolve, reject) => {\n        promises.push({\n          resolve,\n          reject\n        });\n        worker.postMessage(data);\n      });\n    };\n  };\n  const decode = createWorkerAsyncFunction(qrWorkerMethod, ['https://cdn.jsdelivr.net/npm/jsqr@1.2.0/dist/jsQR.min.js']);\n  function useWebQRScanner(video, {\n    isEnabled,\n    captureOptions,\n    interval,\n    onScanned,\n    onError\n  }) {\n    const isRunning = React.useRef(false);\n    const timeout = React.useRef(undefined);\n    async function scanAsync() {\n      // If interval is 0 then only scan once.\n      if (!isRunning.current || !onScanned) {\n        stop();\n        return;\n      }\n      try {\n        const data = (0, _WebCameraUtils.captureImageData)(video.current, captureOptions);\n        if (data) {\n          const nativeEvent = await decode(data);\n          if (nativeEvent?.data) {\n            onScanned({\n              nativeEvent\n            });\n          }\n        }\n      } catch (error) {\n        if (onError) {\n          onError({\n            nativeEvent: error\n          });\n        }\n      } finally {\n        // If interval is 0 then only scan once.\n        if (interval === 0) {\n          stop();\n          return;\n        }\n        const intervalToUse = !interval || interval < 0 ? 16 : interval;\n        // @ts-ignore: Type 'Timeout' is not assignable to type 'number'\n        timeout.current = setTimeout(() => {\n          scanAsync();\n        }, intervalToUse);\n      }\n    }\n    function stop() {\n      isRunning.current = false;\n      clearTimeout(timeout.current);\n    }\n    React.useEffect(() => {\n      if (isEnabled) {\n        isRunning.current = true;\n        scanAsync();\n      }\n      return () => {\n        if (isEnabled) {\n          stop();\n        }\n      };\n    }, [isEnabled]);\n  }\n});","lineCount":147,"map":[[22,2,60,0,"exports"],[22,9,60,0],[22,10,60,0,"useWebQRScanner"],[22,25,60,0],[22,28,60,0,"useWebQRScanner"],[22,43,60,0],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,1,0],[24,6,1,0,"React"],[24,11,1,0],[24,14,1,0,"_interopNamespace"],[24,31,1,0],[24,32,1,0,"_react"],[24,38,1,0],[25,2,2,0],[25,6,2,0,"_WebCameraUtils"],[25,21,2,0],[25,24,2,0,"require"],[25,31,2,0],[25,32,2,0,"_dependencyMap"],[25,46,2,0],[26,2,3,0],[26,8,3,6,"qrWorkerMethod"],[26,22,3,20],[26,25,3,23,"qrWorkerMethod"],[26,26,3,24],[27,4,3,26,"data"],[27,8,3,30],[28,4,3,32,"width"],[28,9,3,37],[29,4,3,39,"height"],[30,2,3,46],[30,3,3,47],[30,8,3,52],[31,4,4,4],[32,4,5,4],[32,10,5,10,"decoded"],[32,17,5,17],[32,20,5,20,"self"],[32,24,5,24],[32,25,5,25,"jsQR"],[32,29,5,29],[32,30,5,30,"data"],[32,34,5,34],[32,36,5,36,"width"],[32,41,5,41],[32,43,5,43,"height"],[32,49,5,49],[32,51,5,51],[33,6,6,8,"inversionAttempts"],[33,23,6,25],[33,25,6,27],[34,4,7,4],[34,5,7,5],[34,6,7,6],[35,4,8,4],[35,8,8,8,"parsed"],[35,14,8,14],[36,4,9,4],[36,8,9,8],[37,6,10,8,"parsed"],[37,12,10,14],[37,15,10,17,"JSON"],[37,19,10,21],[37,20,10,22,"parse"],[37,25,10,27],[37,26,10,28,"decoded"],[37,33,10,35],[37,34,10,36],[38,4,11,4],[38,5,11,5],[38,6,12,4],[38,12,12,10],[39,6,13,8,"parsed"],[39,12,13,14],[39,15,13,17,"decoded"],[39,22,13,24],[40,4,14,4],[41,4,15,4],[41,8,15,8,"parsed"],[41,14,15,14],[41,16,15,16,"data"],[41,20,15,20],[41,22,15,22],[42,6,16,8],[42,12,16,14,"nativeEvent"],[42,23,16,25],[42,26,16,28],[43,8,17,12,"type"],[43,12,17,16],[43,14,17,18],[43,18,17,22],[44,8,18,12,"data"],[44,12,18,16],[44,14,18,18,"parsed"],[44,20,18,24],[44,21,18,25,"data"],[44,25,18,29],[45,8,19,12,"cornerPoints"],[45,20,19,24],[45,22,19,26],[45,24,19,28],[46,8,20,12,"bounds"],[46,14,20,18],[46,16,20,20],[47,10,20,22,"origin"],[47,16,20,28],[47,18,20,30],[48,12,20,32,"x"],[48,13,20,33],[48,15,20,35],[48,16,20,36],[49,12,20,38,"y"],[49,13,20,39],[49,15,20,41],[50,10,20,43],[50,11,20,44],[51,10,20,46,"size"],[51,14,20,50],[51,16,20,52],[52,12,20,54,"width"],[52,17,20,59],[52,19,20,61],[52,20,20,62],[53,12,20,64,"height"],[53,18,20,70],[53,20,20,72],[54,10,20,74],[55,8,20,76],[56,6,21,8],[56,7,21,9],[57,6,22,8],[57,10,22,12,"parsed"],[57,16,22,18],[57,17,22,19,"location"],[57,25,22,27],[57,27,22,29],[58,8,23,12,"nativeEvent"],[58,19,23,23],[58,20,23,24,"cornerPoints"],[58,32,23,36],[58,35,23,39],[58,36,24,16,"parsed"],[58,42,24,22],[58,43,24,23,"location"],[58,51,24,31],[58,52,24,32,"topLeftCorner"],[58,65,24,45],[58,67,25,16,"parsed"],[58,73,25,22],[58,74,25,23,"location"],[58,82,25,31],[58,83,25,32,"bottomLeftCorner"],[58,99,25,48],[58,101,26,16,"parsed"],[58,107,26,22],[58,108,26,23,"location"],[58,116,26,31],[58,117,26,32,"topRightCorner"],[58,131,26,46],[58,133,27,16,"parsed"],[58,139,27,22],[58,140,27,23,"location"],[58,148,27,31],[58,149,27,32,"bottomRightCorner"],[58,166,27,49],[58,167,28,13],[59,6,29,8],[60,6,30,8],[60,13,30,15,"nativeEvent"],[60,24,30,26],[61,4,31,4],[62,4,32,4],[62,11,32,11,"parsed"],[62,17,32,17],[63,2,33,0],[63,3,33,1],[64,2,34,0],[64,8,34,6,"createWorkerAsyncFunction"],[64,33,34,31],[64,36,34,34,"createWorkerAsyncFunction"],[64,37,34,35,"fn"],[64,39,34,37],[64,41,34,39,"deps"],[64,45,34,43],[64,50,34,48],[65,4,35,4],[65,10,35,10,"stringifiedFn"],[65,23,35,23],[65,26,35,26],[65,27,36,8],[65,42,36,23,"fn"],[65,44,36,25],[65,45,36,26,"toString"],[65,53,36,34],[65,54,36,35],[65,55,36,36],[65,58,36,39],[65,60,37,8],[65,87,37,35],[65,89,38,8],[65,126,38,45],[65,128,39,8],[65,157,39,37],[65,159,40,8],[65,163,40,12],[65,164,41,5],[66,4,42,4],[66,8,42,8,"deps"],[66,12,42,12],[66,13,42,13,"length"],[66,19,42,19],[66,22,42,22],[66,23,42,23],[66,25,42,25],[67,6,43,8,"stringifiedFn"],[67,19,43,21],[67,20,43,22,"unshift"],[67,27,43,29],[67,28,43,30],[67,45,43,47,"deps"],[67,49,43,51],[67,50,43,52,"map"],[67,53,43,55],[67,54,43,57,"dep"],[67,57,43,60],[67,61,43,65],[67,65,43,69,"dep"],[67,68,43,72],[67,71,43,75],[67,72,43,76],[67,73,43,77,"join"],[67,77,43,81],[67,78,43,82],[67,82,43,86],[67,83,43,87],[67,87,43,91],[67,88,43,92],[68,4,44,4],[69,4,45,4],[69,10,45,10,"blob"],[69,14,45,14],[69,17,45,17],[69,21,45,21,"Blob"],[69,25,45,25],[69,26,45,26,"stringifiedFn"],[69,39,45,39],[69,41,45,41],[70,6,45,43,"type"],[70,10,45,47],[70,12,45,49],[71,4,45,67],[71,5,45,68],[71,6,45,69],[72,4,46,4],[72,10,46,10,"worker"],[72,16,46,16],[72,19,46,19],[72,23,46,23,"Worker"],[72,29,46,29],[72,30,46,30,"URL"],[72,33,46,33],[72,34,46,34,"createObjectURL"],[72,49,46,49],[72,50,46,50,"blob"],[72,54,46,54],[72,55,46,55],[72,56,46,56],[73,4,47,4],[74,4,48,4],[74,10,48,10,"promises"],[74,18,48,18],[74,21,48,21],[74,23,48,23],[75,4,49,4,"worker"],[75,10,49,10],[75,11,49,11,"onmessage"],[75,20,49,20],[75,23,49,24,"e"],[75,24,49,25],[75,28,49,30,"promises"],[75,36,49,38],[75,37,49,39,"shift"],[75,42,49,44],[75,43,49,45],[75,44,49,46],[75,46,49,48,"resolve"],[75,53,49,55],[75,54,49,56,"e"],[75,55,49,57],[75,56,49,58,"data"],[75,60,49,62],[75,61,49,63],[76,4,50,4],[76,11,50,12,"data"],[76,15,50,16],[76,19,50,21],[77,6,51,8],[77,13,51,15],[77,17,51,19,"Promise"],[77,24,51,26],[77,25,51,27],[77,26,51,28,"resolve"],[77,33,51,35],[77,35,51,37,"reject"],[77,41,51,43],[77,46,51,48],[78,8,52,12,"promises"],[78,16,52,20],[78,17,52,21,"push"],[78,21,52,25],[78,22,52,26],[79,10,52,28,"resolve"],[79,17,52,35],[80,10,52,37,"reject"],[81,8,52,44],[81,9,52,45],[81,10,52,46],[82,8,53,12,"worker"],[82,14,53,18],[82,15,53,19,"postMessage"],[82,26,53,30],[82,27,53,31,"data"],[82,31,53,35],[82,32,53,36],[83,6,54,8],[83,7,54,9],[83,8,54,10],[84,4,55,4],[84,5,55,5],[85,2,56,0],[85,3,56,1],[86,2,57,0],[86,8,57,6,"decode"],[86,14,57,12],[86,17,57,15,"createWorkerAsyncFunction"],[86,42,57,40],[86,43,57,41,"qrWorkerMethod"],[86,57,57,55],[86,59,57,57],[86,60,58,4],[86,118,58,62],[86,119,59,1],[86,120,59,2],[87,2,60,7],[87,11,60,16,"useWebQRScanner"],[87,26,60,31,"useWebQRScanner"],[87,27,60,32,"video"],[87,32,60,37],[87,34,60,39],[88,4,60,41,"isEnabled"],[88,13,60,50],[89,4,60,52,"captureOptions"],[89,18,60,66],[90,4,60,68,"interval"],[90,12,60,76],[91,4,60,78,"onScanned"],[91,13,60,87],[92,4,60,89,"onError"],[93,2,60,98],[93,3,60,99],[93,5,60,101],[94,4,61,4],[94,10,61,10,"isRunning"],[94,19,61,19],[94,22,61,22,"React"],[94,27,61,27],[94,28,61,28,"useRef"],[94,34,61,34],[94,35,61,35],[94,40,61,40],[94,41,61,41],[95,4,62,4],[95,10,62,10,"timeout"],[95,17,62,17],[95,20,62,20,"React"],[95,25,62,25],[95,26,62,26,"useRef"],[95,32,62,32],[95,33,62,33,"undefined"],[95,42,62,42],[95,43,62,43],[96,4,63,4],[96,19,63,19,"scanAsync"],[96,28,63,28,"scanAsync"],[96,29,63,28],[96,31,63,31],[97,6,64,8],[98,6,65,8],[98,10,65,12],[98,11,65,13,"isRunning"],[98,20,65,22],[98,21,65,23,"current"],[98,28,65,30],[98,32,65,34],[98,33,65,35,"onScanned"],[98,42,65,44],[98,44,65,46],[99,8,66,12,"stop"],[99,12,66,16],[99,13,66,17],[99,14,66,18],[100,8,67,12],[101,6,68,8],[102,6,69,8],[102,10,69,12],[103,8,70,12],[103,14,70,18,"data"],[103,18,70,22],[103,21,70,25],[103,25,70,25,"captureImageData"],[103,40,70,41],[103,41,70,41,"captureImageData"],[103,57,70,41],[103,59,70,42,"video"],[103,64,70,47],[103,65,70,48,"current"],[103,72,70,55],[103,74,70,57,"captureOptions"],[103,88,70,71],[103,89,70,72],[104,8,71,12],[104,12,71,16,"data"],[104,16,71,20],[104,18,71,22],[105,10,72,16],[105,16,72,22,"nativeEvent"],[105,27,72,33],[105,30,72,36],[105,36,72,42,"decode"],[105,42,72,48],[105,43,72,49,"data"],[105,47,72,53],[105,48,72,54],[106,10,73,16],[106,14,73,20,"nativeEvent"],[106,25,73,31],[106,27,73,33,"data"],[106,31,73,37],[106,33,73,39],[107,12,74,20,"onScanned"],[107,21,74,29],[107,22,74,30],[108,14,75,24,"nativeEvent"],[109,12,76,20],[109,13,76,21],[109,14,76,22],[110,10,77,16],[111,8,78,12],[112,6,79,8],[112,7,79,9],[112,8,80,8],[112,15,80,15,"error"],[112,20,80,20],[112,22,80,22],[113,8,81,12],[113,12,81,16,"onError"],[113,19,81,23],[113,21,81,25],[114,10,82,16,"onError"],[114,17,82,23],[114,18,82,24],[115,12,82,26,"nativeEvent"],[115,23,82,37],[115,25,82,39,"error"],[116,10,82,45],[116,11,82,46],[116,12,82,47],[117,8,83,12],[118,6,84,8],[118,7,84,9],[118,16,85,16],[119,8,86,12],[120,8,87,12],[120,12,87,16,"interval"],[120,20,87,24],[120,25,87,29],[120,26,87,30],[120,28,87,32],[121,10,88,16,"stop"],[121,14,88,20],[121,15,88,21],[121,16,88,22],[122,10,89,16],[123,8,90,12],[124,8,91,12],[124,14,91,18,"intervalToUse"],[124,27,91,31],[124,30,91,34],[124,31,91,35,"interval"],[124,39,91,43],[124,43,91,47,"interval"],[124,51,91,55],[124,54,91,58],[124,55,91,59],[124,58,91,62],[124,60,91,64],[124,63,91,67,"interval"],[124,71,91,75],[125,8,92,12],[126,8,93,12,"timeout"],[126,15,93,19],[126,16,93,20,"current"],[126,23,93,27],[126,26,93,30,"setTimeout"],[126,36,93,40],[126,37,93,41],[126,43,93,47],[127,10,94,16,"scanAsync"],[127,19,94,25],[127,20,94,26],[127,21,94,27],[128,8,95,12],[128,9,95,13],[128,11,95,15,"intervalToUse"],[128,24,95,28],[128,25,95,29],[129,6,96,8],[130,4,97,4],[131,4,98,4],[131,13,98,13,"stop"],[131,17,98,17,"stop"],[131,18,98,17],[131,20,98,20],[132,6,99,8,"isRunning"],[132,15,99,17],[132,16,99,18,"current"],[132,23,99,25],[132,26,99,28],[132,31,99,33],[133,6,100,8,"clearTimeout"],[133,18,100,20],[133,19,100,21,"timeout"],[133,26,100,28],[133,27,100,29,"current"],[133,34,100,36],[133,35,100,37],[134,4,101,4],[135,4,102,4,"React"],[135,9,102,9],[135,10,102,10,"useEffect"],[135,19,102,19],[135,20,102,20],[135,26,102,26],[136,6,103,8],[136,10,103,12,"isEnabled"],[136,19,103,21],[136,21,103,23],[137,8,104,12,"isRunning"],[137,17,104,21],[137,18,104,22,"current"],[137,25,104,29],[137,28,104,32],[137,32,104,36],[138,8,105,12,"scanAsync"],[138,17,105,21],[138,18,105,22],[138,19,105,23],[139,6,106,8],[140,6,107,8],[140,13,107,15],[140,19,107,21],[141,8,108,12],[141,12,108,16,"isEnabled"],[141,21,108,25],[141,23,108,27],[142,10,109,16,"stop"],[142,14,109,20],[142,15,109,21],[142,16,109,22],[143,8,110,12],[144,6,111,8],[144,7,111,9],[145,4,112,4],[145,5,112,5],[145,7,112,7],[145,8,112,8,"isEnabled"],[145,17,112,17],[145,18,112,18],[145,19,112,19],[146,2,113,0],[147,0,113,1],[147,3]],"functionMap":{"names":["<global>","qrWorkerMethod","createWorkerAsyncFunction","deps.map$argument_0","worker.onmessage","<anonymous>","Promise$argument_0","useWebQRScanner","scanAsync","setTimeout$argument_0","stop","React.useEffect$argument_0"],"mappings":"AAA;uBCE;CD8B;kCEC;wDCS,mBD;uBEM,wCF;WGC;2BCC;SDG;KHC;CFC;OOI;ICG;yCC8B;aDE;KDE;IGC;KHG;oBIC;eNK;SMI;KJC;CPC"},"hasCjsExports":false},"type":"js/module"}]}