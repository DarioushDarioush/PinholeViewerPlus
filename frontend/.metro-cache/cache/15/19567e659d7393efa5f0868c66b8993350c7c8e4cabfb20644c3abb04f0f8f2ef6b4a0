{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":64,"index":64}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":65},"end":{"line":2,"column":69,"index":134}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":135},"end":{"line":3,"column":45,"index":180}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../screens/ViewfinderScreen","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":181},"end":{"line":4,"column":59,"index":240}}],"key":"Qc4efk6A2u/sCgWH4XkHBQDYYKU=","exportNames":["*"],"imports":1}},{"name":"../types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":241},"end":{"line":5,"column":53,"index":294}}],"key":"SiqkZ9nARqNkdXfcIWbBgsKp5Yo=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/index.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return Index;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  var _screensViewfinderScreen = require(_dependencyMap[3], \"../screens/ViewfinderScreen\");\n  var ViewfinderScreen = _interopDefault(_screensViewfinderScreen);\n  var _types = require(_dependencyMap[4], \"../types\");\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  function Index() {\n    _s();\n    const [settings, setSettings] = (0, _react.useState)({\n      focalLength: 50,\n      pinholeSize: 0.3,\n      filmFormat: _types.FILM_FORMATS[2],\n      filmOrientation: 'landscape',\n      iso: 100,\n      selectedCondition: null,\n      useRedFilter: false,\n      selectedFilter: 'None',\n      useReciprocityFailure: true,\n      bracketStops: 0\n    });\n\n    // Reload settings every time the tab comes into focus\n    (0, _expoRouter.useFocusEffect)((0, _react.useCallback)(() => {\n      loadSettings();\n    }, []));\n\n    // Also load on initial mount for web compatibility\n    (0, _react.useEffect)(() => {\n      loadSettings();\n    }, []);\n    const loadSettings = async () => {\n      try {\n        // Ensure we're in browser environment\n        if (typeof window === 'undefined') return;\n        const stored = await AsyncStorage.default.getItem('app_settings');\n        console.log('Loaded settings from storage:', stored);\n        if (stored) {\n          const parsedSettings = JSON.parse(stored);\n          setSettings(prev => ({\n            ...prev,\n            ...parsedSettings,\n            // Ensure filmFormat is properly restored\n            filmFormat: parsedSettings.filmFormat || prev.filmFormat,\n            filmOrientation: parsedSettings.filmOrientation || 'landscape',\n            selectedFilter: parsedSettings.selectedFilter || 'None'\n          }));\n        }\n      } catch (error) {\n        console.error('Error loading settings:', error);\n      }\n    };\n    const saveSettings = async newSettings => {\n      try {\n        setSettings(newSettings);\n        await AsyncStorage.default.setItem('app_settings', JSON.stringify(newSettings));\n      } catch (error) {\n        console.error('Error saving settings:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ViewfinderScreen.default, {\n      settings: settings,\n      updateSettings: saveSettings\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 10\n    }, this);\n  }\n  _s(Index, \"B7EqwwDomjKeiTj5AvKUYNmvO9k=\", false, function () {\n    return [_expoRouter.useFocusEffect];\n  });\n  _c = Index;\n  var _c;\n  $RefreshReg$(_c, \"Index\");\n});","lineCount":96,"map":[[14,2,7,15,"Object"],[14,8,7,15],[14,9,7,15,"defineProperty"],[14,23,7,15],[14,24,7,15,"exports"],[14,31,7,15],[15,4,7,15,"enumerable"],[15,14,7,15],[16,4,7,15,"get"],[16,7,7,15],[16,18,7,15,"get"],[16,19,7,15],[17,6,7,15],[17,13,7,15,"Index"],[17,18,7,15],[18,4,7,15],[19,2,7,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,3,0],[23,6,3,0,"_expoRouter"],[23,17,3,0],[23,20,3,0,"require"],[23,27,3,0],[23,28,3,0,"_dependencyMap"],[23,42,3,0],[24,2,4,0],[24,6,4,0,"_screensViewfinderScreen"],[24,30,4,0],[24,33,4,0,"require"],[24,40,4,0],[24,41,4,0,"_dependencyMap"],[24,55,4,0],[25,2,4,0],[25,6,4,0,"ViewfinderScreen"],[25,22,4,0],[25,25,4,0,"_interopDefault"],[25,40,4,0],[25,41,4,0,"_screensViewfinderScreen"],[25,65,4,0],[26,2,5,0],[26,6,5,0,"_types"],[26,12,5,0],[26,15,5,0,"require"],[26,22,5,0],[26,23,5,0,"_dependencyMap"],[26,37,5,0],[27,2,5,53],[27,6,5,53,"_reactJsxDevRuntime"],[27,25,5,53],[27,28,5,53,"require"],[27,35,5,53],[27,36,5,53,"_dependencyMap"],[27,50,5,53],[28,2,7,15],[28,11,7,24,"Index"],[28,16,7,29,"Index"],[28,17,7,29],[28,19,7,32],[29,4,7,32,"_s"],[29,6,7,32],[30,4,8,2],[30,10,8,8],[30,11,8,9,"settings"],[30,19,8,17],[30,21,8,19,"setSettings"],[30,32,8,30],[30,33,8,31],[30,36,8,34],[30,40,8,34,"useState"],[30,46,8,42],[30,47,8,42,"useState"],[30,55,8,42],[30,57,8,56],[31,6,9,4,"focalLength"],[31,17,9,15],[31,19,9,17],[31,21,9,19],[32,6,10,4,"pinholeSize"],[32,17,10,15],[32,19,10,17],[32,22,10,20],[33,6,11,4,"filmFormat"],[33,16,11,14],[33,18,11,16,"FILM_FORMATS"],[33,24,11,28],[33,25,11,28,"FILM_FORMATS"],[33,37,11,28],[33,38,11,29],[33,39,11,30],[33,40,11,31],[34,6,12,4,"filmOrientation"],[34,21,12,19],[34,23,12,21],[34,34,12,32],[35,6,13,4,"iso"],[35,9,13,7],[35,11,13,9],[35,14,13,12],[36,6,14,4,"selectedCondition"],[36,23,14,21],[36,25,14,23],[36,29,14,27],[37,6,15,4,"useRedFilter"],[37,18,15,16],[37,20,15,18],[37,25,15,23],[38,6,16,4,"selectedFilter"],[38,20,16,18],[38,22,16,20],[38,28,16,26],[39,6,17,4,"useReciprocityFailure"],[39,27,17,25],[39,29,17,27],[39,33,17,31],[40,6,18,4,"bracketStops"],[40,18,18,16],[40,20,18,18],[41,4,19,2],[41,5,19,3],[41,6,19,4],[43,4,21,2],[44,4,22,2],[44,8,22,2,"useFocusEffect"],[44,19,22,16],[44,20,22,16,"useFocusEffect"],[44,34,22,16],[44,36,23,4],[44,40,23,4,"useCallback"],[44,46,23,15],[44,47,23,15,"useCallback"],[44,58,23,15],[44,60,23,16],[44,66,23,22],[45,6,24,6,"loadSettings"],[45,18,24,18],[45,19,24,19],[45,20,24,20],[46,4,25,4],[46,5,25,5],[46,7,25,7],[46,9,25,9],[46,10,26,2],[46,11,26,3],[48,4,28,2],[49,4,29,2],[49,8,29,2,"useEffect"],[49,14,29,11],[49,15,29,11,"useEffect"],[49,24,29,11],[49,26,29,12],[49,32,29,18],[50,6,30,4,"loadSettings"],[50,18,30,16],[50,19,30,17],[50,20,30,18],[51,4,31,2],[51,5,31,3],[51,7,31,5],[51,9,31,7],[51,10,31,8],[52,4,33,2],[52,10,33,8,"loadSettings"],[52,22,33,20],[52,25,33,23],[52,31,33,23,"loadSettings"],[52,32,33,23],[52,37,33,35],[53,6,34,4],[53,10,34,8],[54,8,35,6],[55,8,36,6],[55,12,36,10],[55,19,36,17,"window"],[55,25,36,23],[55,30,36,28],[55,41,36,39],[55,43,36,41],[56,8,38,6],[56,14,38,12,"stored"],[56,20,38,18],[56,23,38,21],[56,29,38,27,"AsyncStorage"],[56,41,38,39],[56,42,38,39,"default"],[56,49,38,39],[56,50,38,40,"getItem"],[56,57,38,47],[56,58,38,48],[56,72,38,62],[56,73,38,63],[57,8,39,6,"console"],[57,15,39,13],[57,16,39,14,"log"],[57,19,39,17],[57,20,39,18],[57,51,39,49],[57,53,39,51,"stored"],[57,59,39,57],[57,60,39,58],[58,8,40,6],[58,12,40,10,"stored"],[58,18,40,16],[58,20,40,18],[59,10,41,8],[59,16,41,14,"parsedSettings"],[59,30,41,28],[59,33,41,31,"JSON"],[59,37,41,35],[59,38,41,36,"parse"],[59,43,41,41],[59,44,41,42,"stored"],[59,50,41,48],[59,51,41,49],[60,10,42,8,"setSettings"],[60,21,42,19],[60,22,42,20,"prev"],[60,26,42,24],[60,31,42,29],[61,12,43,10],[61,15,43,13,"prev"],[61,19,43,17],[62,12,44,10],[62,15,44,13,"parsedSettings"],[62,29,44,27],[63,12,45,10],[64,12,46,10,"filmFormat"],[64,22,46,20],[64,24,46,22,"parsedSettings"],[64,38,46,36],[64,39,46,37,"filmFormat"],[64,49,46,47],[64,53,46,51,"prev"],[64,57,46,55],[64,58,46,56,"filmFormat"],[64,68,46,66],[65,12,47,10,"filmOrientation"],[65,27,47,25],[65,29,47,27,"parsedSettings"],[65,43,47,41],[65,44,47,42,"filmOrientation"],[65,59,47,57],[65,63,47,61],[65,74,47,72],[66,12,48,10,"selectedFilter"],[66,26,48,24],[66,28,48,26,"parsedSettings"],[66,42,48,40],[66,43,48,41,"selectedFilter"],[66,57,48,55],[66,61,48,59],[67,10,49,8],[67,11,49,9],[67,12,49,10],[67,13,49,11],[68,8,50,6],[69,6,51,4],[69,7,51,5],[69,8,51,6],[69,15,51,13,"error"],[69,20,51,18],[69,22,51,20],[70,8,52,6,"console"],[70,15,52,13],[70,16,52,14,"error"],[70,21,52,19],[70,22,52,20],[70,47,52,45],[70,49,52,47,"error"],[70,54,52,52],[70,55,52,53],[71,6,53,4],[72,4,54,2],[72,5,54,3],[73,4,56,2],[73,10,56,8,"saveSettings"],[73,22,56,20],[73,25,56,23],[73,31,56,30,"newSettings"],[73,42,56,54],[73,46,56,59],[74,6,57,4],[74,10,57,8],[75,8,58,6,"setSettings"],[75,19,58,17],[75,20,58,18,"newSettings"],[75,31,58,29],[75,32,58,30],[76,8,59,6],[76,14,59,12,"AsyncStorage"],[76,26,59,24],[76,27,59,24,"default"],[76,34,59,24],[76,35,59,25,"setItem"],[76,42,59,32],[76,43,59,33],[76,57,59,47],[76,59,59,49,"JSON"],[76,63,59,53],[76,64,59,54,"stringify"],[76,73,59,63],[76,74,59,64,"newSettings"],[76,85,59,75],[76,86,59,76],[76,87,59,77],[77,6,60,4],[77,7,60,5],[77,8,60,6],[77,15,60,13,"error"],[77,20,60,18],[77,22,60,20],[78,8,61,6,"console"],[78,15,61,13],[78,16,61,14,"error"],[78,21,61,19],[78,22,61,20],[78,46,61,44],[78,48,61,46,"error"],[78,53,61,51],[78,54,61,52],[79,6,62,4],[80,4,63,2],[80,5,63,3],[81,4,65,2],[81,24,65,9],[81,28,65,9,"_reactJsxDevRuntime"],[81,47,65,9],[81,48,65,9,"jsxDEV"],[81,54,65,9],[81,56,65,10,"ViewfinderScreen"],[81,72,65,26],[81,73,65,26,"default"],[81,80,65,26],[82,6,65,27,"settings"],[82,14,65,35],[82,16,65,37,"settings"],[82,24,65,46],[83,6,65,47,"updateSettings"],[83,20,65,61],[83,22,65,63,"saveSettings"],[84,4,65,76],[85,6,65,76,"fileName"],[85,14,65,76],[85,16,65,76,"_jsxFileName"],[85,28,65,76],[86,6,65,76,"lineNumber"],[86,16,65,76],[87,6,65,76,"columnNumber"],[87,18,65,76],[88,4,65,76],[88,11,65,78],[88,12,65,79],[89,2,66,0],[90,2,66,1,"_s"],[90,4,66,1],[90,5,7,24,"Index"],[90,10,7,29],[91,4,7,29],[91,12,22,2,"useFocusEffect"],[91,23,22,16],[91,24,22,16,"useFocusEffect"],[91,38,22,16],[92,2,22,16],[93,2,22,16,"_c"],[93,4,22,16],[93,7,7,24,"Index"],[93,12,7,29],[94,2,7,29],[94,6,7,29,"_c"],[94,8,7,29],[95,2,7,29,"$RefreshReg$"],[95,14,7,29],[95,15,7,29,"_c"],[95,17,7,29],[96,0,7,29],[96,3]],"functionMap":{"names":["<global>","Index","useFocusEffect$argument_0","useEffect$argument_0","loadSettings","setSettings$argument_0","saveSettings"],"mappings":"AAA;eCM;gBCgB;KDE;YEI;GFE;uBGE;oBCS;UDO;GHK;uBKE;GLO;CDG"},"hasCjsExports":false},"type":"js/module"}]}